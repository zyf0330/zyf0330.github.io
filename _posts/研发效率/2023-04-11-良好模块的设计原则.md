---
layout: post
title: '良好模块的设计原则.md'
date: 2023-04-11
category: 研发效率
---

以下介绍了模块设计的原则，也可以作为设计文档的内容结构指引。

对于模块的能力和实现部分，描述了  **要做什么**  而非怎么做。

  

## 模块的作用和目的

- 支撑什么业务能力，解决什么业务问题
- 性能、资源消耗方面的要求


## 模块的能力

- 对外具备哪些能力
    - 什么能力对应支持或解决哪部分业务问题
    - 不具备哪些能力
- 内部各单元的组织结构
    - 各单元交互方式


**明确自身和内部各单元职责才能做到高内聚低耦合**

## 模块的实现

> 注意，此处的实现指模块的实现，即类、接口、函数等的定义，而非函数体的实现

一个模块包括三部分：

- 同外部交互
    - 为外部提供功能，  **支撑了模块的能力**
    - 依赖外部资源
- 内部结构


### 提供功能

定义了如何为外部模块或实体提供所需的功能 。

列出各个对外接口，以及分别如何支撑模块所需的能力。其形式和手段一般是下列所述。

- 交互形式
    - 被动等待调用
    - 订阅消息或事件
    - 主动请求接口或拉取数据
- 交互手段
    - API Facade
    - Service method
    - function
    - RPC 和 SDK
    - 消息队列
    - event-bus
    - ...
- 使用选定方式的目的和理由


总体上，这部分描述了这个模块在外部视角中的交互方式。

### 依赖资源

为了提供特定功能，需要依赖的外部资源（忽略基础设施），主要是数据和事件

- 种类
    - 数据库数据
    - 外部事件：event-bus, 消息队列
    - SDK 和 RPC
    - 第三方服务
    - 时钟（如 chronos）
    - ...
- 选定种类的目的和理由


### 内部结构

- 内部组织结构各种单元，分别作为什么角色、负责什么事情
    - 数据模型和存储 Entity
        - 数据层模型封装 Repository
    - 生产消费者 Provider、Consumer
    - 主要逻辑封装 Service
    - 调度器 Scheduler
    - 各种角色...
- 角色之间的关系和层次
- 各个角色提供的方法，详细定义了其行为（不关心实现）


## 最后

本文所指的模块是一般意义上的，也就是说小到函数、大到系统，在其位置上都可以被作为模块来思考，来应用以上原则设计。

